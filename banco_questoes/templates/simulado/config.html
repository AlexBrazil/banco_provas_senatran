{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <title>Configurar Simulado</title>

    <!-- CSS do simulado -->
    <link rel="stylesheet" href="{% static 'Simulado/simulado.css' %}">
</head>
<body class="simulado-container">

    <h1 class="simulado-title">Simulado</h1>

    <!-- ========================= -->
    <!-- FORM PRINCIPAL DE CONFIG -->
    <!-- ========================= -->
    <form method="post" action="{% url 'simulado:iniciar' %}" id="simulado-form" class="simulado-form">
        {% csrf_token %}

        <!-- ================= -->
        <!-- CURSO -->
        <!-- ================= -->
        <div class="form-group">
            <label for="curso_id">Curso</label>
            <select name="curso_id" id="curso_id" required>
                <option value="">Selecione o curso...</option>
                {% for c in cursos %}
                    <option value="{{ c.id }}">{{ c.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- ================= -->
        <!-- MÓDULO -->
        <!-- ================= -->
        <div class="form-group">
            <label for="modulo_id">Módulo</label>
            <select name="modulo_id" id="modulo_id" disabled>
                <option value="">Todos os módulos</option>
            </select>
        </div>

        <!-- ================= -->
        <!-- DIFICULDADE -->
        <!-- ================= -->
        <div class="form-group">
            <label for="dificuldade">Dificuldade</label>
            <select name="dificuldade" id="dificuldade">
                <option value="">Misturado</option>
                <option value="FACIL">Fácil</option>
                <option value="INTERMEDIARIO">Intermediário</option>
                <option value="DIFICIL">Difícil</option>
            </select>
        </div>

        <!-- ================= -->
        <!-- FILTROS BOOLEANOS -->
        <!-- ================= -->
        <div class="form-group check-group">
            <label>
                <input type="checkbox" name="com_imagem" id="com_imagem" value="1">
                Somente questões com imagem
            </label>

            <label>
                <input type="checkbox" name="so_placas" id="so_placas" value="1">
                Somente questões de placas
            </label>
        </div>

        <!-- ================= -->
        <!-- QUANTIDADE -->
        <!-- ================= -->
        <div class="form-group">
            <label for="qtd">Quantidade de questões</label>
            <input
                type="number"
                name="qtd"
                id="qtd"
                value="10"
                min="1"
                max="50"
                required
            >
        </div>

        <!-- ================= -->
        <!-- PAINEL DE STATS -->
        <!-- ================= -->
        <div id="stats-panel" class="stats-panel">
            <h3>Disponibilidade</h3>

            <p id="stats_hint" class="stats-hint"></p>
            <p id="stats_error" class="stats-error is-hidden"></p>

            <ul>
                <li><strong>Total disponível:</strong> <span id="stat-total">–</span></li>
                <li><strong>Com imagem:</strong> <span id="stat-imagem">–</span></li>
                <li><strong>Placas:</strong> <span id="stat-placas">–</span></li>
            </ul>

            <h4>Por dificuldade</h4>
            <ul>
                <li>Fácil: <span id="stat-facil">–</span></li>
                <li>Intermediário: <span id="stat-intermediario">–</span></li>
                <li>Difícil: <span id="stat-dificil">–</span></li>
            </ul>
        </div>

        <!-- ================= -->
        <!-- BOTÃO -->
        <!-- ================= -->
        <div class="form-actions">
            <button type="submit" id="btn-iniciar" disabled>
                Iniciar Simulado
            </button>
            <button type="button" id="btn-limpar" disabled>
                Limpar filtros
            </button>
        </div>
    </form>

    <!-- ========================= -->
    <!-- JS DO SIMULADO (AJAX) -->
    <!-- ========================= -->
    <script>
        window.SIMULADO_ENDPOINTS = {
            modulos: "{% url 'simulado:api_modulos' %}",
            stats: "{% url 'simulado:api_stats' %}",
        };
    </script>
    <script src="{% static 'Simulado/simulado.js' %}"></script>

</body>
</html>
